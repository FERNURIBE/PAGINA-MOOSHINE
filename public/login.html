<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Iniciar sesión</title>
  <link rel="stylesheet" href="css/stylessignup.css"> 
</head>
<body>
    <img src="/imagenes/LOGO.webp" alt="Logo" class="logo">
  
  <div class="signup-container">
    <h1>Iniciar Sesión</h1>
    <p id="error-message"></p>
    <form id="form"> 
        
        <div>
            <label for="email-input">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#E8EAED"><path d="M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480v58q0 59-40.5 100.5T740-280q-35 0-66-15t-52-43q-29 29-65.5 43.5T480-280q-83 0-141.5-58.5T280-480q0-83 58.5-141.5T480-680q83 0 141.5 58.5T680-480v58q0 26 17 44t43 18q26 0 43-18t17-44v-58q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93h200v80H480Zm0-280q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35Z"/></svg>
            </label>
            <input type="email" name="email" id="email-input" placeholder="Email">
        </div>
        <div>
            <label for="password-input">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#E8EAED"><path d="M280-240q-100 0-170-70T40-480q0-100 70-170t170-70q66 0 121 33t87 87h432v240h-80v120H600v-120H488q-32 54-87 87t-121 33Zm0-80q66 0 106-40.5t48-79.5h246v120h80v-120h80v-80H434q-8-39-48-79.5T280-640q-66 0-113 47t-47 113q0 66 47 113t113 47Zm0-80q33 0 56.5-23.5T360-480q0-33-23.5-56.5T280-560q-33 0-56.5 23.5T200-480q0 33 23.5 56.5T280-400Zm0-80Z"/></svg>
            </label>
            <input type="password" name="password" id="password-input" placeholder="Contraseña">
        </div>
        
        <button type="submit"> Iniciar sesión</button>
    </form>

    

    <p>¿No tienes una cuenta? <a href="signup">Registrate</a></p>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script>
    const loginForm = document.querySelector('#form');
    loginForm.addEventListener( 'submit', async (e) => {
        e.preventDefault();
        const email = e.target.email.value;
        const password = e.target.password.value;

        try {
            const {data} = await axios.post('/api/v1/users/login', {email, password});
            localStorage.setItem('token', data.msg);
            window.location.href = 'index.html';
            
        } catch (error) {
            console.error(error);
        }

    });
  </script>

  <script type="text/javascript" src="js/validacionsignup.js" defer></script>
</body>
</html>
